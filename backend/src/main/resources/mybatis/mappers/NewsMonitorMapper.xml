<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.dao.NewsMonitorDAO">

  <select id="getLastNewsCreatedAt" resultType="map">
    SELECT MAX(CREATED_AT) AS LAST_CREATED_AT
    FROM STOCK_NEWS
  </select>

  <!-- 총 뉴스 수 -->
  <select id="countAllNews" resultType="int">
    SELECT COUNT(*)
    FROM STOCK_NEWS
  </select>

  <!-- 최근 1시간 뉴스 -->
  <select id="countRecentNews" resultType="int">
    SELECT COUNT(*)
    FROM STOCK_NEWS
    WHERE CREATED_AT >= SYSDATE - (1/24)
  </select>

  <!-- 감성 분석 미완료 -->
  <select id="countUnanalyzedNews" resultType="int">
    SELECT COUNT(*)
    FROM STOCK_NEWS
    WHERE SENTIMENT IS NULL
  </select>
</mapper>
